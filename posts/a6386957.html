<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="数据库,学习,"><meta name="description" content="基础篇内容  一、数据库安全性 二、数据库完整性"><meta name="keywords" content="数据库,学习"><meta property="og:type" content="article"><meta property="og:title" content="数据库学习基础篇②"><meta property="og:url" content="https://www.shelhon.cn/posts/a6386957.html"><meta property="og:site_name" content="无问西东"><meta property="og:description" content="基础篇内容  一、数据库安全性 二、数据库完整性"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://www.shelhon.cn/posts/a6386957/1.png"><meta property="og:image" content="https://www.shelhon.cn/posts/a6386957/2.png"><meta property="og:image" content="https://www.shelhon.cn/posts/a6386957/3.png"><meta property="og:updated_time" content="2018-08-23T03:41:52.439Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="数据库学习基础篇②"><meta name="twitter:description" content="基础篇内容  一、数据库安全性 二、数据库完整性"><meta name="twitter:image" content="https://www.shelhon.cn/posts/a6386957/1.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!0,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.shelhon.cn/posts/a6386957.html"><title>数据库学习基础篇② | 无问西东</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3275656b1c327868bf311aa7c5fdabd2";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div> <a href="https://github.com/Shelhon/Shelhon.github.io" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64ceaa;color:#fff;position:absolute;top:0;border:0;left:0;transform:scale(-1,1)" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">无问西东</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">糊涂脸水聪明枕</h1></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-commonweal"><a href="/404.html/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br> 公益404</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.shelhon.cn/posts/a6386957.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Qsx"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="无问西东"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">数据库学习基础篇②</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-22T20:24:43+08:00">2018-08-22</time></span> <span class="post-updated">&nbsp; | &nbsp; 更新于 <time itemprop="dateUpdated" datetime="2018-08-23T11:41:52+08:00" content="2018-08-23">2018-08-23</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span></span> <span class="post-meta-divider">|</span><span class="page-pv"><i class="fa fa-file-o"></i><span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">3,677</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">13</span></div></div></header><div class="post-body" itemprop="articleBody"><center><strong>基础篇内容</strong></center><p>一、数据库安全性</p><p>二、数据库完整性</p><hr><a id="more"></a><h1 id="数据库安全性"><a href="#数据库安全性" class="headerlink" title="数据库安全性"></a>数据库安全性</h1><h2 id="计算机安全性概述"><a href="#计算机安全性概述" class="headerlink" title="计算机安全性概述"></a>计算机安全性概述</h2><p>　数据库的安全性是指保护数据库以防止不合法的使用所造成的数据泄露、更改或破坏。<br>　　安全性问题不是数据库系统所独有的，所有计算机系统都有这个问题。只是在数据库系统中大量数据集中存放，而且为许多最终用户直接共享，从而使安全性问题更为突出。 系统安全保护措施是否有效是数据库系统的主要指标之一。 数据库的安全性和计算机系统的安全性，包括操作系统、网络系统的安全性是紧密联系、相互支持的。</p><h3 id="计算机系统的三类安全性问题"><a href="#计算机系统的三类安全性问题" class="headerlink" title="计算机系统的三类安全性问题"></a>计算机系统的三类安全性问题</h3><p>所谓计算机系统安全性，是指为计算机系统建立和采取的各种安全保护措施，以保护计算机系统中的硬件、软件及数据，防止其因偶然或恶意的原因使系统遭到破坏，数据遭到更改或泄露等。</p><p>计算机系统安全性问题可以分成三大类：</p><ul><li><p>技术安全类： 指计算机系统中采用具有一定安全性的硬件、软件来实现对计算机系统及其所存数据的安全保护，当计算机系统受到无意或恶意的攻击时仍能保证系统正常运行，保证系统内的数据不增加、不丢失、不泄露。</p></li><li><p>管理安全类： 软硬件意外故障、场地的意外事故、管理不善导致的计算机设备和数据介质的物理破坏、丢失等安全问题。</p></li><li><p>政策法律类 ： 政府部门建立的有关计算机犯罪、数据安全保密的法律道德准则和政策法规、法令。</p></li></ul><p>该笔记只包含技术安全</p><h2 id="数据库安全性控制"><a href="#数据库安全性控制" class="headerlink" title="数据库安全性控制"></a>数据库安全性控制</h2><h3 id="用户标识与鉴别"><a href="#用户标识与鉴别" class="headerlink" title="用户标识与鉴别"></a>用户标识与鉴别</h3><p>系统提供的最外层安全保护措施。</p><p>基本方法是：<br>系统提供一定的方式让用户标识自己的名字或身份；<br>系统内部记录着所有合法用户的标识；<br>每次用户要求进入系统时，由系统核对用户提供的身份标识；<br>通过鉴定后才提供机器使用权。<br>用户标识和鉴定可以重复多次。</p><p>常用的方法有：</p><ul><li>用户标识（User Identification）：<br>用一个用户名（User Name）或用户标识号（UID）来标明用户身份。</li><li>口令（Password）：<br>系统核对口令以鉴别用户身份。<br>通过用户名和口令的方法简单易行，但这些信息容易被人窃取。可以采取更复杂的方法 —— 每个用户预先约定好一个计算过程或者函数。<br>系统提供一个随机数<br>用户根据自己预先约定的计算过程或者函数进行计算<br>系统根据用户计算结果是否正确鉴定用户身份</li></ul><h3 id="存取控制"><a href="#存取控制" class="headerlink" title="存取控制"></a>存取控制</h3><p>数据库安全性所关心的主要是DBMS的存取控制机制。</p><p>数据库安全最重要的一点就是确保只授权给有资格的用户访问数据库的权限，同时令所有未授权的人员无法接近数据，这主要通过数据库系统的存取控制机制实现。<br>存取控制机制主要包括两部分：</p><ul><li>定义用户权限</li><li>合法权限检查</li></ul><p>用户权限定义和合法权检查机制一起组成了DBMS的安全子系统</p><p>常用存取控制方法有：</p><ul><li>自主存取控制（Discretionary Access Control，简称DAC）<br>同一用户对于不同的数据对象有不同的存取权限<br>不同的用户对同一对象也有不同的权限<br>用户还可将其拥有的存取权限转授给其他用户</li><li>强制存取控制（Mandatory Access Control，简称 MAC）<br>每一个数据对象被标以一定的密级<br>每一个用户也被授予某一个级别的许可证<br>对于任意一个对象，只有具有合法许可证的用户才可以存取</li></ul><h4 id="自主存取控制方法"><a href="#自主存取控制方法" class="headerlink" title="自主存取控制方法"></a>自主存取控制方法</h4><p>主要通过 SQL 的 GRANT 语句和 REVOKE 语句实现自主存取控制。</p><p>用户权限由两个要素组成：</p><ul><li>数据库对象</li><li>操作类型</li></ul><p>定义用户存取权限，是指定义用户可以在哪些数据库对象上进行哪些类型的操作。定义存取权限称为授权。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	        关系数据库系统中的存取权限</span><br><span class="line">———————————————————————————————————————————————————————</span><br><span class="line">对象类型    对象        操作类型</span><br><span class="line"></span><br><span class="line">———————————————————————————————————————————————————————</span><br><span class="line">数据库      模式         CREATE SCHEMA</span><br><span class="line">	   基本表         CREATE  TABLE ,ALTERTABLE</span><br><span class="line">模式        视图         CREATE VIEW</span><br><span class="line">	    索引         CREATE  INDEX</span><br><span class="line">数据      基本表和视图      SELECT ,INSERT,UPDATE,DELETE ,REFERENCES,ALL PRIVILEGES</span><br><span class="line">数据       属性列        SELECT,INSERT,UPDATE,REFERENCES,ALL PRIVILEGES</span><br><span class="line">———————————————————————————————————————————————————————</span><br></pre></td></tr></table></figure><h4 id="授权与回收"><a href="#授权与回收" class="headerlink" title="授权与回收"></a>授权与回收</h4><p>授权<br>SQL中用GRANT语句向用户授权。GRANT语句的一般格式为：<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> &lt;权限&gt; [,&lt;权限&gt;]... </span><br><span class="line">[ <span class="keyword">ON</span> &lt;对象类型&gt; &lt;对象名&gt; ]</span><br><span class="line"><span class="keyword">TO</span> &lt;用户&gt;[,&lt;用户&gt;]...</span><br><span class="line">[ <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span> ];</span><br></pre></td></tr></table></figure><p></p><p>语义：将对指定操作对象的指定操作权限授予指定的用户</p><p>一 、GRANT<br>发出GRANT的可以是：</p><ul><li>DBA</li><li>数据库对象创建者（即属主Owner）</li><li>拥有该权限的用户<br>接受权限的用户可以是：</li><li>一个或多个具体用户</li><li>PUBLIC（全体用户）</li></ul><p>如果指定了WITH GRANT OPTION 子句，则获得某种权限的用户还可以把这种权限再授予其他用户，没有指定WITH GRANT OPTION子句，则获得某种权限的用户只能使用该权限，不能传播该权限。不允许循环授权。</p><p>例 把查询Student表的权限授给U1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> </span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">TO</span> u1;</span><br></pre></td></tr></table></figure><p>例 把对Student表和Course表的全部操作权授予用户U2和U3</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student ,Course</span><br><span class="line"><span class="keyword">TO</span> U2 U3;</span><br></pre></td></tr></table></figure><p>例 把对表SC 和查询权限授予所有用户</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">TO</span> <span class="keyword">PUBLIC</span>;</span><br></pre></td></tr></table></figure><p>例 把查询Student表和修改学生学号的权限授给用户U4</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span>(SNO),<span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">TO</span> U4;</span><br></pre></td></tr></table></figure><p>对属性列的授权时必须明确指出相应属性列名</p><p>例 把对表SC的INSERT权限授予U5 用户，并允许将此权限授予给其他用户</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">TO</span> U5</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure><p>执行此sql语句后，u5不仅拥有了对表SC的insert权限，还能传播此权限。<br>例如U5还可以将权限授予U6</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">TO</span> U6</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure><p>U6还可以授予给U7<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">TO</span> U7;</span><br></pre></td></tr></table></figure><p></p><p>因为U6未给U7传播的权限，所以U7不能再传播此权限。</p> <img src="/posts/a6386957/1.png"><p>二、 回收REVOKE<br>授予的权限可以由DBA或其他授权者用REVOKE语句收回<br>REVOKE语句的一般格式为：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;权限&gt;[,&lt;权限&gt;]... </span><br><span class="line">[<span class="keyword">ON</span> &lt;对象类型&gt; &lt;对象名&gt;]</span><br><span class="line"><span class="keyword">FROM</span> &lt;用户&gt;[,&lt;用户&gt;]...;</span><br></pre></td></tr></table></figure><p>例： 把用户U4修改学生学号的权限收回</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">UPDATE</span>(Sno)</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">FROM</span> U4;</span><br></pre></td></tr></table></figure><p>例 ：回收所有用户对表SC的查询权限</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">PUBLIC</span>;</span><br></pre></td></tr></table></figure><p>例： 把用户U5对SC表的INSERT权限收回<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">FROM</span> U5 <span class="keyword">CASCADE</span></span><br></pre></td></tr></table></figure><p></p><p>将用户U5的insert权限收回的时候，必须级联（CASCADE）收回，不然系统将拒绝（restrict）执行该命令，因为在上面授权的例子中，U5将对SC表的insert权限授予了U6，而U6又授予给了U7</p><p>注意：这里缺省值为restrict，有的DBMS缺省值为CASCADE，会自动执行级联操作而不必明显的写出CASCADE，如果U6或者U7还从其他用户处获得对SC表的insert权限，那么他们仍然具有此权限。系统只回收直接或间接从U5处获得的权限</p> <img src="/posts/a6386957/2.png"><p>SQL灵活的授权机制：</p><ul><li>DBA：<br>拥有所有对象的所有权限<br>不同的权限授予不同的对象</li><li>用户 ：<br>拥有自己建立的对象的全部的操作权限<br>GRANT 授予其他用户</li><li>被授权的用户<br>继续授权许可：再授予</li><li>所有授予出去的权利在必要时都可以用revoke语句收回。</li></ul><p>三、 创建数据库模式的权限</p><p>对数据库模式的授权，DBA 在创建用户时实现<br>一般CREATE USER格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> &lt;username&gt;</span><br><span class="line">[<span class="keyword">WITH</span>] [ DBA | <span class="keyword">RESOURCE</span> | <span class="keyword">CONNECT</span>]</span><br></pre></td></tr></table></figure><p>对该语句的说明:</p><ul><li>只有系统的超级用户才有权创建一个新的数据库用户</li><li>新创建的数据库用户有三种权限：CONNECT , RESOURCE ,DBA</li><li>CREATE USER命令中没有指定权限的话，默认创建的是CONNECT权限。拥有CONNECT权限的用户不能创建新用户，不能创建模式，也不能创建基本表，只能登陆数据库。然后由DBA或者其他用户授予他应有的权限，根据获得的授权权限他可以对数据库对象进行权限范围内的操作。</li><li>拥有RESOURCE权限的用户能创建基本表和视图，称为所创建对象的属主，但是不能创建模式，不能创建新的用户。数据库对象的属主可以使用GRANT语句把对象上的权限授予其他用户。</li><li>拥有DBA的用户是系统中的超级用户，可以创建新的用户，创建模式，创建基本表和视图等，DBA拥有对所有数据库对象的存取权限，还可以把这些权限授予一般用户。</li></ul> <img src="/posts/a6386957/3.png"><p>一个DBA用户可以拥有CREATE USER, CREATE SCHEMA和CREATE TABLE 权限，一个RESOURCE用户可以拥有CREATE TABLE权限。</p><blockquote><p>1个数据库下，可以有多个模式。<br>1个模式下，可以有0个或多个表　。<br>首先我来做一个比喻，什么是User，什么是Database，什么是Schema，什么是Table，什么是列，什么是行，？<br>我们可以把Database看作是一个大仓库，仓库分了很多很多的房间，Schema就是其中的房间，一个Schema代表一个房间，Table可以看作是每个Schema中的床，Table就被放入每个房间中，不能放置在房间之外。然后床上可以放置很多物品，就好比Table上可以放置很多列和行一样。所以Schema包含的是Object，而不是User。<br>User是每个对应数据库的主人，既然有操作数据库的权利，就肯定有操作数据库中每个Schema（房间）的权利。换句话说，如果他是某个仓库的主人，那么这个仓库的使用权和仓库中的所有东西都是他的，他有完全的操作权，。我们还可以给User分配具体的权限，也就是他到某一个房间能做些什么，是只能看（Read-Only），还是可以像主人一样有所有的控制权（R/W），这个就要看这个User所对应的角色Role了.<br>在SQL Server2005中，当我们用Create User创建数据库用户时，我们可以为该用户指定一个已经存在的Schema作为默认Schema，如果我们不指定，则该用户所默认的Schema即为dbo 模式，dbo 房间（Schema）好比一个大的公共房间，在当前登录用户没有默认Schema的前提下，如果你在大仓库中进行一些操作，比如Create Tabe，如果没有指定特定的房间（Schema），那么你的物品就只好放进公共的dbo房间（Schema）了。但是如果当前登录用户有默认的Schema，那么所做的一切操作都是在默认Schema上进行（比如当前登录用户为login1。<br>在SQL Server2005中创建一个数据库的时候，会有一些Schema包括进去，被包括进去的Schema有：dbo，INFORMATION_SCHEMA,guest，sys等等。</p></blockquote><h4 id="数据库角色"><a href="#数据库角色" class="headerlink" title="数据库角色"></a>数据库角色</h4><p>数据库角色是被命令的一组与数据库操作相关的权限，角色是权限的集合。<br>因此可以为一组具有相同权限的用户创建一个角色，使用角色来管理数据库权限可以简化授权 。</p><p>首先用CREATE ROLE语句创建角色，然后用GRANT语句给角色授权</p><p>一、角色的创建<br>格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">ROLE</span> &lt;角色名&gt;</span><br></pre></td></tr></table></figure><p>刚刚创建的角色是空的，没有任何内容，可以用GRANT为角色授权</p><p>二、给角色授权</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> &lt;权限&gt; [,&lt;权限&gt;].....</span><br><span class="line"><span class="keyword">ON</span> &lt;对象类型&gt;对象名 </span><br><span class="line"><span class="keyword">TO</span> &lt;角色&gt; [,&lt;角色&gt;]....</span><br></pre></td></tr></table></figure><p>DBA和用户可以利用GRANT语句将权限授予给一个或几个角色</p><p>三、将一个角色授予其他角色或用户</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> &lt;角色<span class="number">1</span> &gt; [,&lt;角色<span class="number">2</span>&gt;]....</span><br><span class="line"><span class="keyword">ON</span> &lt;角色<span class="number">3</span>&gt; [&lt;用户<span class="number">1</span>&gt;]....</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">ADMIN</span> <span class="keyword">OPTION</span>]</span><br></pre></td></tr></table></figure><p>该语句把橘色授予某个用户或另一个角色，这样一个角色（例如角色3）所拥有的权限就是授予它的全部角色（角色1和角色2）所包含的权限的总和。</p><p>授予者或者是角色的创建者，或者拥有在这个角色上的ADMIN OPTION。</p><p>如果指定了WITH ADMIN OPTION 子句，则获得某种权限的角色或用户还可以将权限再授予其他角色。</p><p>一个角色包含的权限包括直接授予这个角色的全部权限加上其他角色授予这个角色的全部权限。</p><p>四、角色权限的收回</p><p>授予的权限可以由DBA或其他授权者用REVOKE语句收回<br>REVOKE语句的一般格式为：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;权限&gt;[,&lt;权限&gt;]... </span><br><span class="line">[<span class="keyword">ON</span> &lt;对象类型&gt; &lt;对象名&gt;]</span><br><span class="line"><span class="keyword">FROM</span> &lt;用户&gt;[,&lt;用户&gt;]...;</span><br></pre></td></tr></table></figure><p>用户可以回收角色的权限，从而修改角色拥有的权限</p><p>REVOKE动作的执行者或者是角色的创建者，或者拥有这个角色上的ADMIN OPTION</p><p>例 通过角色来实现将一组权限授予一个用户</p><p>步骤：</p><ol><li><p>首先创建一个角色R1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">ROLE</span> R1;</span><br></pre></td></tr></table></figure></li><li><p>然后使用GRANT语句，使角色R1拥有Student表的SELECT ,UPDATE ,INSERT权限</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> ,<span class="keyword">UPDATE</span>,<span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Stdent</span><br><span class="line"><span class="keyword">TO</span> R1;</span><br></pre></td></tr></table></figure></li><li><p>将这个角色授予王平，张明，赵玲，使他们具有角色R1包含的全部权限</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> R1 </span><br><span class="line"><span class="keyword">TO</span> 王平，张明，赵玲;</span><br></pre></td></tr></table></figure></li><li><p>当然也可以一次性的通过R1来回收王平的三个权限</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> R1</span><br><span class="line"><span class="keyword">FROM</span> 王平；</span><br></pre></td></tr></table></figure></li></ol><p>例 ： 角色的权限修改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">TO</span> R1;</span><br></pre></td></tr></table></figure><p>使角色R1在原来的基础上增加了Student表的DELETE权限</p><p>例<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">FROM</span> R1;</span><br></pre></td></tr></table></figure><p></p><p>使R1减少了select权限</p><h4 id="强制存取控制（MAC）方法"><a href="#强制存取控制（MAC）方法" class="headerlink" title="强制存取控制（MAC）方法"></a>强制存取控制（MAC）方法</h4></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>Just for fun!</div> <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'> <span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Qsx 微信支付"><p>微信支付</p></div></div></div></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------<i class="fa fa-paw"></i> 文章已经到尾<i class="fa fa-paw"></i> -------------</div></div></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/数据库/" rel="tag"># 数据库</a> <a href="/tags/学习/" rel="tag"># 学习</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/486c9009.html" rel="next" title="数据库学习基础篇①"><i class="fa fa-chevron-left"></i> 数据库学习基础篇①</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Qsx"><p class="site-author-name" itemprop="name">Qsx</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">10</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">4</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">11</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Shelhon" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:ppp00qqq@163.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="http://weibo.com/qsxmybaby" target="_blank" title="微博"><i class="fa fa-fw fa-weibo"></i> 微博</a></span><span class="links-of-author-item"><a href="https://zhihu.com/people/shelhon" target="_blank" title="知乎"><i class="fa fa-fw fa-globe"></i> 知乎</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://www.kofes.cn/" title="cz" target="_blank">cz</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#数据库安全性"><span class="nav-number">1.</span> <span class="nav-text">数据库安全性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#计算机安全性概述"><span class="nav-number">1.1.</span> <span class="nav-text">计算机安全性概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#计算机系统的三类安全性问题"><span class="nav-number">1.1.1.</span> <span class="nav-text">计算机系统的三类安全性问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库安全性控制"><span class="nav-number">1.2.</span> <span class="nav-text">数据库安全性控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#用户标识与鉴别"><span class="nav-number">1.2.1.</span> <span class="nav-text">用户标识与鉴别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存取控制"><span class="nav-number">1.2.2.</span> <span class="nav-text">存取控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#自主存取控制方法"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">自主存取控制方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#授权与回收"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">授权与回收</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据库角色"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">数据库角色</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#强制存取控制（MAC）方法"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">强制存取控制（MAC）方法</span></a></li></ol></li></ol></li></ol></li></ol></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">Qsx</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">Site words total count&#58;</span> <span title="Site words total count">54.7k</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span><span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/love.js"></script></body></html>